<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Memcache Mâ€‹anager">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>ManagerApp</title>
    <link rel="stylesheet" href="{{url_for('static', filename='nicepage.css')}}" media="screen">
    <link rel="stylesheet" href="{{url_for('static', filename='managerApp.css')}}" media="screen">
    <script class="u-script" type="text/javascript" src="{{url_for('static', filename='nicepage.js')}}" defer=""></script>
    <script class="u-script" type="text/javascript" src="{{url_for('static', filename='jquery-1.9.1.min.js')}}" defer=""></script>
    <meta name="generator" content="Nicepage 4.6.6, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
    }
    </script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="managerApp">
    <meta property="og:type" content="website">
  </head>


  <!-- ManagerApp Subtitle -->
  <body class="u-body u-xl-mode">
    <header class="u-clearfix u-header u-palette-1-light-3 u-sticky u-sticky-1972" id="sec-5b77" data-animation-name="" data-animation-duration="0" data-animation-delay="0" data-animation-direction=""><style class="u-sticky-style" data-style-id="1972">
      </style>
        <div class="u-clearfix u-sheet u-sheet-1">
            <h2 class="u-text u-text-default u-text-palette-1-dark-2 u-text-1">Memcache M<span style="font-weight: 400;"></span>anager
            </h2>
            <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
              <div class="menu-collapse u-custom-font u-font-georgia" style="font-size: 1rem; letter-spacing: 0px;">
                <a class="u-button-style u-custom-active-border-color u-custom-active-color u-custom-border u-custom-border-color u-custom-border-radius u-custom-borders u-custom-hover-border-color u-custom-hover-color u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-text-active-color u-custom-text-color u-custom-text-hover-color u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
                  <svg class="u-svg-link" viewBox="0 0 24 24"><use xlink:href="#menu-hamburger"></use></svg>
                  <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><rect y="1" width="16" height="2"></rect><rect y="7" width="16" height="2"></rect><rect y="13" width="16" height="2"></rect>
                </g></svg>
                </a>
              </div>
              <div class="u-custom-menu u-nav-container">
                <ul class="u-custom-font u-font-georgia u-nav u-spacing-30 u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-light-1 u-text-hover-palette-2-light-1 u-text-palette-1-dark-1" style="padding: 10px 0px;">Home</a>
                  </li><li class="u-nav-item"><a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-light-1 u-text-hover-palette-2-light-1 u-text-palette-1-dark-1" style="padding: 10px 0px;">Upload</a>
                  </li><li class="u-nav-item"><a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-light-1 u-text-hover-palette-2-light-1 u-text-palette-1-dark-1" href="Browse.html" style="padding: 10px 0px;">Browse</a>
                  </li><li class="u-nav-item"><a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-light-1 u-text-hover-palette-2-light-1 u-text-palette-1-dark-1" style="padding: 10px 0px;">Key List</a>
                  </li><li class="u-nav-item"><a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-light-1 u-text-hover-palette-2-light-1 u-text-palette-1-dark-1" style="padding: 10px 0px;">Manager</a>
                  </li></ul>
              </div>

              <!-- Web Page Jump Link -->
              <!-- Waiting for url link -->
              <!-- Under Construction -->
              <div class="u-custom-menu u-nav-container-collapse">
                <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
                  <div class="u-inner-container-layout u-sidenav-overflow">
                    <div class="u-menu-close"></div>
                    <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" style="padding: 10px 0px;">Home</a>
                      </li><li class="u-nav-item"><a class="u-button-style u-nav-link" style="padding: 10px 0px;">Upload</a>
                      </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Browse.html" style="padding: 10px 0px;">Browse</a>
                      </li><li class="u-nav-item"><a class="u-button-style u-nav-link" style="padding: 10px 0px;">Key List</a>
                      </li><li class="u-nav-item"><a class="u-button-style u-nav-link" style="padding: 10px 0px;">Manager</a>
                      </li></ul>
                  </div>
                </div>
                <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
              </div>
            </nav>
        </div>
    </header>

    <!-- Statistics Subtitle -->
    <section class="u-clearfix u-grey-5 u-section-1" id="sec-eff3">
      <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <lt-highlighter style="display: none; z-index: 1 !important;">
          <lt-div spellcheck="false" class="lt-highlighter__wrapper" style="width: 144px; height: 39px; transform: none !important; transform-origin: 72.0885px 19.7969px !important; zoom: 1 !important; margin-top: 21px; margin-left: 0px;">
            <lt-div class="lt-highlighter__scroll-element" style="top: 0px; left: 0px; width: 144px; height: 40px;"></lt-div>
          </lt-div>
        </lt-highlighter>
        <h4 class="u-custom-font u-font-georgia u-text u-text-default u-text-palette-1-dark-2 u-text-1">Statistics</h4>
      </div>
    </section>

    <!-- Statistics Section -->
    <!-- Waiting for function complement -->
    <section class="u-clearfix u-white u-section-2" id="sec-e33e">

      <!-- Monitor Chart for past 30 minute -->

        <!-- ATTENTION: Charts shoud be displayed here @Haocheng -->

      <!-- Under Construction -->

      

      <!-- Monitor Table showing the current statistics -->
      <div class="u-clearfix u-sheet u-sheet-1">
        <table class = "statisticsTable">
          <tr>
              <th>Active Workers </th>
              <th>Items Total Size (MB)</th>
              <th>Items Amount</th>
              <th>Requests Served (/min)</th>
              <th>Miss Rate (%) </th>
              <th>Hit Rate (%) </th>
          <tr>

          <!-- Under Construction -->
            <tr>
                <td>{{ instanceAmount }}</td>
                {% for row in cursor %}
                <td>{{ row[0] }}</td>
                <td>{{ row[1] }}</td>
                <td>{{ row[2] }}</td>
                <td>{{ row[3] }}</td>
                <td>{{ row[4] }}</td>
                {% endfor %}
            </tr>

        </table><br>
      </div>
    </section>

    <!-- CSS for Monitor Table -->
    <style>
      .statisticsTable {
          font-family: arial, sans-serif;
          border-collapse: collapse;
          width: 100%;
        }
        
        td, th {
          border: 2px solid #dddddd;
          text-align: center;
          padding: 10px;
        }
        
        tr:nth-child(even) {
          background-color: #dddddd;
        }
    </style>

    <!-- Configuration Subtitle -->
    <section class="u-clearfix u-grey-5 u-section-3" id="sec-2e39">
      <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <lt-highlighter style="display: none; z-index: 1 !important;">
          <lt-div spellcheck="false" class="lt-highlighter__wrapper" style="width: 144px; height: 40px; transform: none !important; transform-origin: 72.0885px 19.7969px !important; zoom: 1 !important; margin-top: 21px; margin-left: 0px;">
            <lt-div class="lt-highlighter__scroll-element" style="top: 0px; left: 0px; width: 144px; height: 40px;"></lt-div>
          </lt-div>
        </lt-highlighter>
        <lt-highlighter style="display: none; z-index: 1 !important;">
          <lt-div spellcheck="false" class="lt-highlighter__wrapper" style="width: 105px; height: 29px; transform: none !important; transform-origin: 52.4167px 14.3958px !important; zoom: 1 !important; margin-top: 7px;">
            <lt-div class="lt-highlighter__scroll-element" style="top: 0px; left: 0px; width: 105px; height: 29px;"></lt-div>
          </lt-div>
        </lt-highlighter>
        <h4 class="u-custom-font u-font-georgia u-text u-text-default u-text-palette-1-dark-2 u-text-1">Configure</h4>
      </div>
    </section>

    <!-- Configuration Section -->
    <section class="u-clearfix u-white u-section-4" id="sec-7ee8">

      <!-- Memcache Capacity & Replacement Policy Setting-->
      <!-- Waiting for function complement -->
      <div class="u-clearfix u-sheet u-sheet-1">
        <!-- check if this url still works before deployment -->
        <form class="configsform" action="{{ url_for('replacePolicyUpdate')}}" method="post">
          <label><b>Memcache Capacity</b> (4096 max):</label>
          <input type="number" name="capacityMB" min="1" max="4096" value="1" required/>
          <label>MB</label><br><br>
              
          <label><b>Memcache Replacement Policy:</b></label><br>
          <input type="radio" name="replacepolicy" value="0"> Random Replacement<br>
          <input type="radio" name="replacepolicy" value="1" checked="checked"/> Least Recently Used<br>

          <input type="submit" value="Apply" href="https://nicepage.com/landing-page" class="u-border-none u-btn u-btn-round u-button-style u-hover-palette-2-light-1 u-palette-1-light-1 u-radius-50 u-btn-1">
        </form><br>
      </div> 

      <!-- Tab button for Memcache Pool Resizing Policy -->
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="poolResizeModeTab">
          <button class="tablinks" onclick="openPoolResizeModeTab(event, 'Manual Mode')" id="defaultOpen">Manual Mode</button>
          <button class="tablinks" onclick="openPoolResizeModeTab(event, 'Automatic Mode')">Automatic Mode</button>
        </div>
          
          <div id="Manual Mode" class="tabcontent">
            <p class="u-text u-text-default u-text-3">Manually growing or shrinking the pool size by 1 betweeen 1 ~ 8.</p>
            <p class="u-text u-text-default u-text-3"><b>Current Memcache Pool Size:</b> {{instanceAmount}}</p>

            <!-- Tab button for choosing growing or shrinking -->
            <div class="manualPoolResizeTab">
              <button class="tablinksManual" onclick="openManualPoolResizeTab(event, 'Manual Grow')" id="defaultOpenManual">Grow (+1)</button>
              <button class="tablinksManual" onclick="openManualPoolResizeTab(event, 'Manual Shrink')">Shrink (-1)</button>
            </div>

            <div id="Manual Grow" class="tabcontentManual">
              <form class="poolResizeManualGrowForm" action="{{ url_for('poolSizeManualGrow')}}" method="post">
                <input type="submit" value="Apply" href="https://nicepage.com/landing-page" class="u-border-none u-btn u-btn-round u-button-style u-hover-palette-2-light-1 u-palette-1-light-1 u-radius-50 u-btn-1">
              </form>
            </div>

            <div id="Manual Shrink" class="tabcontentManual">
              <form class="poolResizeManualShrinkForm" action="{{ url_for('poolSizeManualShrink')}}" method="post">
                <input type="submit" value="Apply" href="https://nicepage.com/landing-page" class="u-border-none u-btn u-btn-round u-button-style u-hover-palette-2-light-1 u-palette-1-light-1 u-radius-50 u-btn-1">
              </form>
            </div>
          </div>
          
          <div id="Automatic Mode" class="tabcontent">
            <p class="u-text u-text-default u-text-3">Configure a simple auto-scaling policy by setting parameters below.</p><br>
            <!-- functionable url required before deployment -->
            <form class="poolResizeAutoForm" action="{{ url_for('poolResizeAuto')}}" method="post">
              <!-- check max > min required -->
              <label><b>Max Miss Rate</b> (%):</label>
              <input type="number" name="maxMissRate" min="1" max="99" value="75" required/>
              <label><b>Min Miss Rate</b> (%):</label>
              <input type="number" name="minMissRate" min="1" max="99" value="25" required/><br>
              <p class="u-text u-text-default u-text-3">Average miss rate for all nodes in the pool over the past 1 minute.</p>
              <p class="u-text u-text-default u-text-3">When max threshold is reached, pool grows. When min threshold is reached, pool shrinks. </p>
              <br>

              <label><b>Pool Expand Ratio:</b></label>
              <input type="number" name="poolExpandRatio" min="1" max="8" value="2" step="0.01" required/>
              <label><b>Pool Shrink Ratio:</b></label>
              <input type="number" name="poolShrinkRatio" min="0.12" max="1" value="0.5" step="0.01" required/><br>
              <p class="u-text u-text-default u-text-3">At what ratio will the pool size be explanded or shrinked.</p>
              
              <input type="submit" value="Apply" href="https://nicepage.com/landing-page" class="u-border-none u-btn u-btn-round u-button-style u-hover-palette-2-light-1 u-palette-1-light-1 u-radius-50 u-btn-1"><br>
            </form>
          </div>
      </div>
    </section>

    <!-- Javascript for Mode Switch Tab -->
    <script>
      function openPoolResizeModeTab(evt, modeName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(modeName).style.display = "block";
        evt.currentTarget.className += " active";
      }
      document.getElementById("defaultOpen").click();
    </script>

    <script>
      function openManualPoolResizeTab(evt, resizeChoice) {
        var i, tabcontentManual, tablinksManual;
        tabcontentManual = document.getElementsByClassName("tabcontentManual");
        for (i = 0; i < tabcontentManual.length; i++) {
          tabcontentManual[i].style.display = "none";
        }
        tablinksManual = document.getElementsByClassName("tablinksManual");
        for (i = 0; i < tablinksManual.length; i++) {
          tablinksManual[i].className = tablinksManual[i].className.replace(" active", "");
        }
        document.getElementById(resizeChoice).style.display = "block";
        evt.currentTarget.className += " active";
      }
      document.getElementById("defaultOpenManual").click();
    </script>

    <!-- CSS for Mode Switch Tab -->
    <style>
    /* Style the tab */
    .poolResizeModeTab {
      overflow: hidden;
      border: 1px solid #ccc;
      background-color: #f1f1f1;
    }

    .manualPoolResizeTab {
      overflow: hidden;
      border: none;
      background-color: transparent;
    }

    /* Style the buttons inside the tab */
    .poolResizeModeTab button {
      background-color: inherit;
      float: left;
      border: none;
      outline: none;
      cursor: pointer;
      padding: 14px 16px;
      transition: 0.3s;
      font-size: 17px;
    }

    .manualPoolResizeTab button {
      background-color: inherit;
      float: left;
      border: none;
      outline: none;
      cursor: pointer;
      padding: 14px 16px;
      transition: 0.3s;
      font-size: 17px;
    }

    /* Change background color of buttons on hover */
    .poolResizeModeTab button:hover {
      background-color: #f4ecf7;
    }

    .manualPoolResizeTab button:hover {
      background-color: #f4ecf7;
    }

    /* Create an active/current tablink class */
    .poolResizeModeTab button.active {
      background-color: #d6eaf8;
    }

    .manualPoolResizeTab button.active {
      background-color: #d6eaf8;
    }

    /* Style the tab content */
    .tabcontent {
      display: none;
      padding: 6px 12px;
      border: 1px solid #ccc;
      border-top: none;
    }

    .tabcontentManual {
      display: none;
      padding: 6px 12px;
      border: none;
      border-top: none;
    }
    </style>


    <!-- File Remove Subtitle  -->
    <section class="u-clearfix u-grey-5 u-section-5" id="sec-b683">
      <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <lt-highlighter style="display: none; z-index: 1 !important;">
          <lt-div spellcheck="false" class="lt-highlighter__wrapper" style="width: 144px; height: 40px; transform: none !important; transform-origin: 72.0885px 19.7969px !important; zoom: 1 !important; margin-top: 21px; margin-left: 0px;">
            <lt-div class="lt-highlighter__scroll-element" style="top: 0px; left: 0px; width: 144px; height: 40px;"></lt-div>
          </lt-div>
        </lt-highlighter>
        <lt-highlighter style="display: none; z-index: 1 !important;">
          <lt-div spellcheck="false" class="lt-highlighter__wrapper" style="width: 105px; height: 29px; transform: none !important; transform-origin: 52.4167px 14.3958px !important; zoom: 1 !important; margin-top: 7px;">
            <lt-div class="lt-highlighter__scroll-element" style="top: 0px; left: 0px; width: 105px; height: 29px;"></lt-div>
          </lt-div>
        </lt-highlighter>
        <h4 class="u-custom-font u-font-georgia u-text u-text-default u-text-palette-1-dark-2 u-text-1">File Remove</h4>
      </div>
    </section>

    <!-- File Remove Section  -->
    <section class="u-clearfix u-white u-section-6" id="sec-e560">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="fileRemoveTab">
          <button class="tablinksFileRemove" onclick="openFileRemoveTab(event, 'Clear Database & S3')">Clear Database & S3</button>
          <button class="tablinksFileRemove" onclick="openFileRemoveTab(event, 'Clear Memcache')">Clear Memcache</button>
        </div>

        <div id="Clear Database & S3" class="tabcontentFileRemove">
          <p class="u-text u-text-default u-text-3">Are you sure you would like to clear all the data in <b>Database and S3</b>?</p>
          <p class="u-text u-text-default u-text-3">Please note that this operation is <b>irreversible</b></p>
          <form class="clearDBForm" action="{{ url_for('clearDatabase')}}" method="post">
            <input type="submit" value="Apply" href="https://nicepage.com/landing-page" class="u-border-none u-btn u-btn-round u-button-style u-hover-palette-2-light-1 u-palette-1-light-1 u-radius-50 u-btn-1">
          </form>
        </div>

        <div id="Clear Memcache" class="tabcontentFileRemove">
          <p class="u-text u-text-default u-text-3">Are you sure you would like to clear all the data in <b>Memcache</b>?</p>
          <p class="u-text u-text-default u-text-3">Please note that this operation is <b>irreversible</b></p>
          <form class="clearmemcacheForm" action="{{ url_for('clearMemcache')}}" method="post">
            <input type="submit" value="Apply" href="https://nicepage.com/landing-page" class="u-border-none u-btn u-btn-round u-button-style u-hover-palette-2-light-1 u-palette-1-light-1 u-radius-50 u-btn-1">
          </form>
        </div>
      </div>

      <!-- CSS for File Remove Tab -->
      <style>
      .fileRemoveTab {
        overflow: hidden;
        border: none;
        background-color: transparent;
      }

      .fileRemoveTab button {
        background-color: #F8F9F9;
        float: left;
        border: 1px solid #ccc;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        font-size: 17px;
      }

      .fileRemoveTab button:hover {
        background-color: #f4ecf7;
      }

      .fileRemoveTab button.active {
        background-color: #d6eaf8;
      }

      .tabcontentFileRemove {
        display: none;
        padding: 6px 12px;
        border: none;
        border-top: none;
      }
      </style>

      <!-- Javascript for File Remove Tab -->
      <script>
        function openFileRemoveTab(evt, clearChoice) {
          var i, tabcontentFileRemove, tablinksFileRemove;
          tabcontentFileRemove = document.getElementsByClassName("tabcontentFileRemove");
          for (i = 0; i < tabcontentFileRemove.length; i++) {
            tabcontentFileRemove[i].style.display = "none";
          }
          tablinksFileRemove = document.getElementsByClassName("tablinksFileRemove");
          for (i = 0; i < tablinksFileRemove.length; i++) {
            tablinksFileRemove[i].className = tablinksFileRemove[i].className.replace(" active", "");
          }
          document.getElementById(clearChoice).style.display = "block";
          evt.currentTarget.className += " active";
        }
      </script>

    </section>

    <!-- Cute Poka Bird. just for fun.  -->
    <div class="poka">
      <a class="poka"><img src="https://cdn.hinatazaka46.com/files/14/hinata/pages/hinachri2020/assets/images/poka.gif" height="120" width="120"></a>
    </div>
    <style>.poka{
      position: fixed;
      left: 0;
      bottom: 0;
      z-index: 2;
    }
    </style>
    
    <!-- Footer Section  -->
    <footer class="u-align-center u-clearfix u-footer u-palette-1-light-3 u-footer" id="sec-5d25"><div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <lt-highlighter style="display: none; z-index: 1 !important; width: 1100px; margin-right: auto; margin-left: auto;">
          <lt-div spellcheck="false" class="lt-highlighter__wrapper" style="width: 417px; height: 25px; transform: none !important; transform-origin: 208.5px 12.7969px !important; zoom: 1 !important; margin-top: 6px; margin-left: 362px;">
            <lt-div class="lt-highlighter__scroll-element" style="top: 0px; left: 0px; width: 417px; height: 25px;">
              <canvas class="lt-highlighter__canvas" width="52" height="19" style="display: none; top: 3px; left: 222px;"></canvas>
            </lt-div>
          </lt-div>
        </lt-highlighter>
        <lt-highlighter style="display: none; z-index: 1 !important;">
          <lt-div spellcheck="false" class="lt-highlighter__wrapper" style="width: 417px; height: 19px; transform: none !important; transform-origin: 208.5px 9.59896px !important; zoom: 1 !important; margin-top: 18px; margin-left: 362px;">
            <lt-div class="lt-highlighter__scroll-element" style="top: 0px; left: 0px; width: 417px; height: 19px;">
              <canvas class="lt-highlighter__canvas" width="42" height="15" style="display: none; top: 2px; left: 196px;"></canvas>
            </lt-div>
          </lt-div>
        </lt-highlighter>
        <!-- You could put your name here :)  -->
        <p class="u-align-center u-custom-font u-font-georgia u-small-text u-text u-text-grey-60 u-text-variant u-text-1">Page created by <a class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-1" href="https://github.com/haozhe0302">Haozhe</a></p>
      </div></footer>
  </body>
</html>